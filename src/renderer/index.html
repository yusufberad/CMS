<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob:; media-src 'self' http://localhost:8888 https://*.s3.*.amazonaws.com https://s3.*.amazonaws.com https://*.amazonaws.com http://*;"
    />
    <title>Heysem Cloud Manager</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Titlebar -->
    <div class="titlebar">
      <div class="titlebar-drag">
        <div class="app-title">Heysem Cloud Manager</div>
      </div>
      <div class="titlebar-controls">
        <button class="titlebar-btn minimize" id="titlebar-minimize">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <rect width="10" height="1" x="1" y="5.5" />
          </svg>
        </button>
        <button class="titlebar-btn maximize" id="titlebar-maximize">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <rect
              width="9"
              height="9"
              x="1.5"
              y="1.5"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
            />
          </svg>
        </button>
        <button class="titlebar-btn close" id="titlebar-close">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <path
              d="M2 2l8 8M10 2l-8 8"
              stroke="currentColor"
              stroke-width="1.5"
            />
          </svg>
        </button>
      </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <!-- S3 Connection Form -->
        <div class="connection-form" id="s3-form">
          <h3>Amazon S3 Bağlantısı</h3>
          <div class="form-group">
            <label>Access Key ID</label>
            <input
              type="text"
              id="s3-access-key"
              placeholder="AKIAIOSFODNN7EXAMPLE"
            />
          </div>
          <div class="form-group">
            <label>Secret Access Key</label>
            <input type="password" id="s3-secret-key" placeholder="••••••••" />
          </div>
          <div class="form-group">
            <label>Bölge (Region)</label>
            <select id="s3-region">
              <option value="us-east-1">US East (N. Virginia)</option>
              <option value="us-east-2">US East (Ohio)</option>
              <option value="us-west-1">US West (N. California)</option>
              <option value="us-west-2">US West (Oregon)</option>
              <option value="eu-west-1">EU (Ireland)</option>
              <option value="eu-west-2">EU (London)</option>
              <option value="eu-central-1">EU (Frankfurt)</option>
              <option value="ap-northeast-1">Asia Pacific (Tokyo)</option>
              <option value="ap-southeast-1">Asia Pacific (Singapore)</option>
              <option value="ap-southeast-2">Asia Pacific (Sydney)</option>
              <option value="sa-east-1">South America (São Paulo)</option>
            </select>
          </div>
          <div class="form-group">
            <label>Özel Endpoint (Opsiyonel)</label>
            <input
              type="text"
              id="s3-endpoint"
              placeholder="https://s3.custom.com"
            />
          </div>
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="s3-remember" />
              <span>Beni Hatırla (PIN ile giriş)</span>
            </label>
          </div>
          <button class="btn-connect" id="s3-connect-btn">
            <span class="btn-text">Bağlan</span>
            <span class="btn-loader"></span>
          </button>
        </div>

        <!-- Connection Status -->
        <div class="connection-status" id="connection-status">
          <div class="status-indicator disconnected"></div>
          <span>Bağlı değil</span>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="content">
        <!-- Toolbar -->
        <div class="toolbar">
          <div class="breadcrumb" id="breadcrumb">
            <span class="breadcrumb-item" data-path="/">Ana Dizin</span>
          </div>
          <div class="toolbar-actions">
            <button
              class="toolbar-btn"
              id="btn-upload"
              title="Dosya Yükle"
              disabled
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              <span>Yükle</span>
            </button>
            <button
              class="toolbar-btn"
              id="btn-download"
              title="Dosya İndir"
              disabled
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" />
              </svg>
              <span>İndir</span>
            </button>
            <button
              class="toolbar-btn"
              id="btn-new-folder"
              title="Yeni Klasör"
              disabled
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"
                />
              </svg>
              <span>Yeni Klasör</span>
            </button>
            <button
              class="toolbar-btn"
              id="btn-tags"
              title="Tag Yönet (S3)"
              disabled
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"
                />
                <line x1="7" y1="7" x2="7.01" y2="7" />
              </svg>
              <span>Tag'ler</span>
            </button>
            <button
              class="toolbar-btn"
              id="btn-refresh"
              title="Yenile"
              disabled
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
                <path d="M21 3v5h-5" />
              </svg>
            </button>
            <button
              class="toolbar-btn"
              id="btn-open-shared-link"
              title="Paylaşılan linki aç"
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M4 12v7a1 1 0 0 0 1 1h7" />
                <polyline points="16 3 21 3 21 8" />
                <line x1="21" y1="3" x2="12" y2="12" />
              </svg>
              <span>Paylaşımı Aç</span>
            </button>
            <button class="toolbar-btn" id="btn-transfers" title="Aktarımlar">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <line x1="12" y1="5" x2="12" y2="19" />
                <polyline points="19 12 12 19 5 12" />
              </svg>
              <span>Aktarımlar</span>
              <span class="transfer-badge hidden" id="transfer-count">0</span>
            </button>
          </div>
        </div>

        <!-- S3 Bucket Selector -->
        <div class="bucket-selector hidden" id="bucket-selector">
          <label>Bucket:</label>
          <select id="bucket-list">
            <option value="">Bucket seçin...</option>
          </select>
          <div class="toolbar-search-area">
            <div class="toolbar-search">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
              </svg>
              <input
                type="text"
                id="file-search-input"
                placeholder="Dosyalar içinde ara..."
                autocomplete="off"
              />
              <button
                class="search-clear"
                id="search-clear-btn"
                title="Temizle"
                style="display: none"
              >
                <svg
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
            <label class="theme-switch" aria-label="Tema değiştir">
              <input type="checkbox" id="theme-toggle-input" />
              <span class="theme-switch-slider">
                <span class="theme-icon sun">
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="12" cy="12" r="4" />
                    <line x1="12" y1="2" x2="12" y2="4" />
                    <line x1="12" y1="20" x2="12" y2="22" />
                    <line x1="4.93" y1="4.93" x2="6.34" y2="6.34" />
                    <line x1="17.66" y1="17.66" x2="19.07" y2="19.07" />
                    <line x1="2" y1="12" x2="4" y2="12" />
                    <line x1="20" y1="12" x2="22" y2="12" />
                    <line x1="4.93" y1="19.07" x2="6.34" y2="17.66" />
                    <line x1="17.66" y1="6.34" x2="19.07" y2="4.93" />
                  </svg>
                </span>
                <span class="theme-icon moon">
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M21 12.79A9 9 0 0 1 11.21 3a7 7 0 1 0 9.79 9.79z"
                    />
                  </svg>
                </span>
              </span>
            </label>
          </div>
        </div>

        <!-- File List -->
        <div class="file-list-container">
          <div class="drop-overlay hidden" id="drop-overlay">
            <div class="drop-overlay-content">
              <svg
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
              >
                <path d="M12 3v12" />
                <path d="m8 11 4 4 4-4" />
                <path d="M20 17v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2" />
              </svg>
              <p>Dosyaları yüklemek için bırakın</p>
              <span>Yalnızca bağlıyken kullanılabilir</span>
            </div>
          </div>
          <div class="file-list-header">
            <div
              class="col-name sortable active"
              role="button"
              tabindex="0"
              data-sort-key="name"
            >
              İsim
              <span class="sort-indicator" data-sort-key="name"></span>
            </div>
            <div
              class="col-size sortable"
              role="button"
              tabindex="0"
              data-sort-key="size"
            >
              Boyut
              <span class="sort-indicator" data-sort-key="size"></span>
            </div>
            <div
              class="col-date sortable"
              role="button"
              tabindex="0"
              data-sort-key="date"
            >
              Tarih
              <span class="sort-indicator" data-sort-key="date"></span>
            </div>
            <div
              class="col-type sortable"
              role="button"
              tabindex="0"
              data-sort-key="type"
            >
              Tür
              <span class="sort-indicator" data-sort-key="type"></span>
            </div>
            <div class="col-actions">İşlemler</div>
          </div>
          <div class="file-list" id="file-list">
            <div class="empty-state">
              <svg
                width="64"
                height="64"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
              >
                <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z" />
              </svg>
              <p>Dosyaları görüntülemek için sunucuya bağlanın</p>
            </div>
          </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container hidden" id="progress-container">
          <div class="progress-info">
            <span id="progress-filename">Dosya adı</span>
            <span id="progress-percent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="progress-details">
            <span id="progress-size">0 KB / 0 KB</span>
            <span id="progress-speed">0 KB/s</span>
            <span id="progress-eta">Tahminleniyor...</span>
          </div>
          <div class="progress-actions">
            <button
              class="btn-progress btn-pause"
              id="btn-pause-upload"
              title="Durdur"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
              </svg>
              <span>Durdur</span>
            </button>
            <button
              class="btn-progress btn-cancel"
              id="btn-cancel-upload"
              title="İptal Et"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
              <span>İptal Et</span>
            </button>
          </div>
        </div>
      </main>

      <!-- Transfer Panel -->
      <div class="transfer-panel hidden" id="transfer-panel">
        <div class="transfer-header">
          <h3>Aktarımlar</h3>
          <button class="transfer-close" id="close-transfers">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>

        <div class="transfer-tabs">
          <button class="transfer-tab active" data-tab="active">
            <span>Aktif</span>
            <span class="tab-count" id="active-count">0</span>
          </button>
          <button class="transfer-tab" data-tab="completed">
            <span>Tamamlanan</span>
            <span class="tab-count" id="completed-count">0</span>
          </button>
        </div>

        <div class="transfer-content">
          <!-- Aktif Aktarımlar -->
          <div class="transfer-tab-content active" id="active-transfers">
            <div class="empty-transfers">
              <svg
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
              >
                <line x1="12" y1="5" x2="12" y2="19" />
                <polyline points="19 12 12 19 5 12" />
              </svg>
              <p>Aktif aktarım yok</p>
            </div>
          </div>

          <!-- Tamamlanan Aktarımlar -->
          <div class="transfer-tab-content hidden" id="completed-transfers">
            <div class="empty-transfers">
              <svg
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
              >
                <polyline points="20 6 9 17 4 12" />
              </svg>
              <p>Tamamlanan aktarım yok</p>
            </div>
          </div>
        </div>

        <div class="transfer-footer">
          <button class="btn-secondary" id="clear-completed">
            Tamamlananları Temizle
          </button>
        </div>
      </div>
    </div>

    <!-- Modal: Yeni Klasör -->
    <div class="modal hidden" id="modal-new-folder">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Yeni Klasör Oluştur</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Klasör Adı</label>
            <input type="text" id="new-folder-name" placeholder="yeni-klasor" />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">İptal</button>
          <button class="btn-primary" id="create-folder-btn">Oluştur</button>
        </div>
      </div>
    </div>

    <!-- Modal: Yeni Bucket -->
    <div class="modal hidden" id="modal-new-bucket">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Yeni Bucket Oluştur</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Bucket Adı</label>
            <input
              type="text"
              id="new-bucket-name"
              placeholder="my-bucket-name"
            />
            <small
              style="
                color: var(--text-muted);
                font-size: 11px;
                margin-top: 4px;
                display: block;
              "
            >
              Sadece küçük harf, rakam ve tire (-) kullanın. Benzersiz olmalı.
            </small>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">İptal</button>
          <button class="btn-primary" id="create-bucket-btn">Oluştur</button>
        </div>
      </div>
    </div>

    <!-- Modal: Image Preview -->
    <div class="modal hidden" id="modal-image-preview">
      <div class="modal-overlay"></div>
      <div class="modal-content image-preview-content">
        <div class="modal-header">
          <h3 id="preview-image-name">Resim Önizleme</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body image-preview-body">
          <div class="image-loader">
            <div class="spinner"></div>
            <p>Yükleniyor...</p>
          </div>
          <img id="preview-image" alt="Preview" style="display: none" />
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">Kapat</button>
        </div>
      </div>
    </div>

    <!-- Modal: Set PIN -->
    <div class="modal hidden" id="modal-set-pin">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>PIN Oluştur</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p
            style="
              color: var(--text-secondary);
              font-size: 13px;
              margin-bottom: 16px;
            "
          >
            Bağlantı bilgilerinizi güvenli bir şekilde saklamak için 4-6 haneli
            bir PIN oluşturun.
          </p>
          <div class="form-group">
            <label>PIN (4-6 hane)</label>
            <input
              type="password"
              id="new-pin"
              placeholder="••••"
              maxlength="6"
              pattern="[0-9]*"
              inputmode="numeric"
            />
          </div>
          <div class="form-group">
            <label>PIN Tekrar</label>
            <input
              type="password"
              id="confirm-pin"
              placeholder="••••"
              maxlength="6"
              pattern="[0-9]*"
              inputmode="numeric"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">İptal</button>
          <button class="btn-primary" id="save-pin-btn">Kaydet</button>
        </div>
      </div>
    </div>

    <!-- Modal: Quick Login -->
    <div class="modal hidden" id="modal-quick-login">
      <div class="modal-overlay"></div>
      <div class="modal-content quick-login-content">
        <div class="modal-header">
          <h3>Hızlı Giriş</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p
            style="
              color: var(--text-secondary);
              font-size: 13px;
              margin-bottom: 16px;
            "
          >
            Kayıtlı bağlantılarınızdan birini seçin:
          </p>
          <div id="saved-connections-list" class="saved-connections-list">
            <!-- Dinamik olarak doldurulacak -->
          </div>
          <div class="quick-login-footer">
            <button class="btn-secondary" id="skip-quick-login">
              Manuel Bağlan
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal: Enter PIN -->
    <div class="modal hidden" id="modal-enter-pin">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>PIN Girişi</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p
            style="
              color: var(--text-secondary);
              font-size: 13px;
              margin-bottom: 16px;
            "
          >
            <strong id="saved-connection-name"></strong> için PIN'inizi girin.
          </p>
          <div class="form-group">
            <label>PIN</label>
            <input
              type="password"
              id="enter-pin"
              placeholder="••••"
              maxlength="6"
              pattern="[0-9]*"
              inputmode="numeric"
            />
          </div>
          <div id="pin-error" class="pin-error hidden">Yanlış PIN</div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">İptal</button>
          <button class="btn-primary" id="unlock-btn">Bağlan</button>
        </div>
      </div>
    </div>

    <!-- Modal: Manage Tags -->
    <div class="modal hidden" id="modal-manage-tags">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Tag Yönetimi</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p
            style="
              color: var(--text-secondary);
              font-size: 13px;
              margin-bottom: 16px;
            "
          >
            <strong id="tag-file-name"></strong> için tag'ler
          </p>
          <div id="current-tags" class="current-tags"></div>
          <div class="form-group" style="margin-top: 16px">
            <label>Yeni Tag Ekle</label>
            <div class="tag-input-group">
              <input
                type="text"
                id="tag-key"
                placeholder="Anahtar (örn: Status)"
              />
              <input
                type="text"
                id="tag-value"
                placeholder="Değer (örn: Active)"
              />
              <button class="btn-add-tag" id="add-tag-btn">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
              </button>
            </div>
          </div>
          <div class="tag-presets">
            <label
              style="
                font-size: 12px;
                color: var(--text-muted);
                margin-bottom: 8px;
                display: block;
              "
              >Hızlı Tag'ler:</label
            >
            <div class="preset-tags">
              <button class="preset-tag" data-key="Status" data-value="Active">
                Active
              </button>
              <button
                class="preset-tag"
                data-key="Status"
                data-value="Archived"
              >
                Archived
              </button>
              <button class="preset-tag" data-key="Priority" data-value="High">
                High
              </button>
              <button
                class="preset-tag"
                data-key="Priority"
                data-value="Medium"
              >
                Medium
              </button>
              <button class="preset-tag" data-key="Priority" data-value="Low">
                Low
              </button>
              <button class="preset-tag" data-key="Type" data-value="Document">
                Document
              </button>
              <button class="preset-tag" data-key="Type" data-value="Image">
                Image
              </button>
              <button class="preset-tag" data-key="Type" data-value="Video">
                Video
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">Kapat</button>
          <button class="btn-primary" id="save-tags-btn">Kaydet</button>
        </div>
      </div>
    </div>

    <!-- Modal: Shared Link -->
    <div class="modal hidden" id="modal-shared-link">
      <div class="modal-overlay"></div>
      <div class="modal-content small-modal">
        <div class="modal-header">
          <h3>Paylaşılan Linki Aç</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>URL</label>
            <input
              type="text"
              id="shared-link-input"
              placeholder="https://..."
            />
          </div>
          <p class="shared-link-hint">
            S3 veya HTTPS paylaşım linklerini buraya yapıştırabilirsiniz. Link
            süresi dolduysa içerik yüklenmez.
          </p>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">Kapat</button>
          <button class="btn-primary" id="open-shared-link-btn">Göster</button>
        </div>
      </div>
    </div>

    <!-- Modal: Shared Preview -->
    <div class="modal hidden" id="modal-shared-preview">
      <div class="modal-overlay"></div>
      <div class="modal-content shared-preview-content">
        <div class="modal-header">
          <h3 id="shared-preview-title">Paylaşılan İçerik</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body shared-preview-body">
          <div class="shared-preview-loader">
            <div class="spinner"></div>
            <p>İçerik yükleniyor...</p>
          </div>
          <img id="shared-preview-image" alt="Paylaşılan içerik" />
          <video id="shared-preview-video" controls preload="auto"></video>
          <iframe id="shared-preview-frame" title="Paylaşılan içerik"></iframe>
          <div class="shared-preview-unsupported hidden">
            Desteklenmeyen dosya türü veya link erişilemedi.
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">Kapat</button>
        </div>
      </div>
    </div>

    <!-- Modal: Share Result -->
    <div class="modal hidden" id="modal-share-result">
      <div class="modal-overlay"></div>
      <div class="modal-content small-modal">
        <div class="modal-header">
          <h3>Paylaşım Linki</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <p class="shared-link-hint">
            Bu link <strong>1 saat</strong> boyunca geçerlidir. Süre dolunca
            erişim kapanır.
          </p>
          <textarea
            id="share-link-output"
            class="share-link-output"
            rows="3"
            readonly
          ></textarea>
        </div>
        <div class="modal-footer share-link-actions">
          <button class="btn-secondary modal-cancel">Kapat</button>
          <button class="btn-primary" id="copy-share-link-btn">Kopyala</button>
        </div>
      </div>
    </div>

    <!-- Modal: Video Preview -->
    <div class="modal hidden" id="modal-video-preview">
      <div class="modal-overlay"></div>
      <div class="modal-content video-preview-content">
        <div class="modal-header">
          <h3 id="preview-video-name">Video Önizleme</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body video-preview-body">
          <div class="video-loader">
            <div class="spinner"></div>
            <p>Video yükleniyor...</p>
          </div>
          <video
            id="preview-video"
            controls
            preload="auto"
            style="display: none"
          >
            Video oynatılamıyor
          </video>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary modal-cancel">Kapat</button>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Transfer Panel -->
    <div class="transfer-panel hidden" id="transfer-panel">
      <div class="transfer-header">
        <h3>Aktarımlar</h3>
        <button class="transfer-close" id="btn-close-transfers">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="transfer-tabs">
        <button class="transfer-tab active" id="tab-uploads">
          Yüklemeler <span class="tab-count" id="upload-count">0</span>
        </button>
        <button class="transfer-tab" id="tab-downloads">
          İndirmeler <span class="tab-count" id="download-count">0</span>
        </button>
      </div>
      <div class="transfer-content">
        <div class="transfer-tab-content" id="uploads-list">
          <div class="empty-transfers">
            <svg
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="17 8 12 3 7 8" />
              <line x1="12" y1="3" x2="12" y2="15" />
            </svg>
            <span>Aktif yükleme yok</span>
          </div>
        </div>
        <div class="transfer-tab-content hidden" id="downloads-list">
          <div class="empty-transfers">
            <svg
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="7 10 12 15 17 10" />
              <line x1="12" y1="15" x2="12" y2="3" />
            </svg>
            <span>Aktif indirme yok</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Load modules first (in dependency order) -->
    <script src="modules/utils.js"></script>
    <script src="modules/ui-manager.js"></script>
    <script src="modules/file-list-manager.js"></script>
    <script src="modules/s3-manager.js"></script>
    
    <!-- Then load main app and crypto helper -->
    <script src="crypto-helper.js"></script>
    <script src="app.js"></script>
  </body>
</html>
